# 基於 AI 的剩餘食材食譜推薦系統需求規格

**專案名稱**: 冰箱剩餘食材 AI 食譜推薦系統  
**建立日期**: 2025年9月  
**版本**: 1.3 

## 目錄
1. 介紹
   1.1 專案概述
   1.2 專案目標
   1.3 範圍
2. 功能需求 (Functional Requirements)
   2.1 Epic 1: 食材輸入與識別 (多模態/雲端 API)
   2.2 Epic 2: AI 食譜檢索與生成 (RAG 核心)
   2.3 Epic 3: 食譜結果展示與互動
3. 非功能需求 (Non-functional Requirements)
   3.1 效能 (Performance)
   3.2 安全性 (Security)
   3.3 可用性與相容性 (Usability & Compatibility)
4. 系統架構 (System Architecture)
   4.1 高層級架構
   4.2 RAG 核心模型架構
   4.3 技術堆疊 (協作優化)
5. 驗收準則 (Acceptance Criteria)

## 1. 介紹

### 1.1 專案概述
本專案旨在開發一個基於 AI 的食譜推薦網站，針對使用者冰箱中剩餘食材的問題，提供智能解決方案。使用者可透過上傳食材照片，系統將利用 **多模態模型 (MLLM) 或雲端 Vision API** 進行識別，並透過 **RAG (檢索增強生成)** 技術推薦客製化料理。

### 1.2 專案目標
- 解決使用者對剩餘食材不知如何運用的痛點。
- 利用 **RAG (Retrieval-Augmented Generation)** 技術提供高度個人化且可靠的食譜推薦。
- 促進環保意識，有效減少家庭食物浪費。
- 建立一個易用、高效且可擴展的食譜推薦平台。

### 1.3 範圍
- **包含**：食材圖片上傳、AI 識別、食材清單手動調整、RAG 食譜檢索與生成、食譜步驟顯示、篩選與回饋機制。
- **不包含**：實體食材配送、社群分享功能、進階營養成分分析。

## 2. 功能需求 (Functional Requirements)

### 2.1 Epic 1: 食材輸入與識別 (多模態/雲端 API)

| Story | 描述 | 驗收標準 (Acceptance Criteria) |
| :--- | :--- | :--- |
| **1.1 圖片上傳** | 作為使用者，我想要能夠上傳冰箱內剩餘食材的圖片，以便系統能識別我有什麼食材。 | 支援多張圖片批次上傳 (JPG, PNG)；提供直觀的拖放介面；圖片上傳後進行預處理 (壓縮、品質優化)。 |
| **1.2 AI 食材識別** | 作為使用者，我想要系統能自動識別圖片中的食材，以便我確認清單。 | 利用 **多模態 LLM 或 雲端 Vision API** 識別食材類型與數量；顯示 AI 識別結果清單（名稱、數量、可信度分數）。 |
| **1.3 清單確認與修正** | 作為使用者，我想要能夠手動編輯、新增或刪除 AI 識別的食材清單，以確保清單準確。 | 提供手動輸入/修改食材名稱、數量、狀態（如：新鮮、冷凍、即將過期）的功能。 |

### 2.2 Epic 2: AI 食譜檢索與生成 (RAG 核心)

| Story | 描述 | 驗收標準 (Acceptance Criteria) |
| :--- | :--- | :--- |
| **2.1 RAG 檢索 (Retriever)** | 作為 AI 代理人，我想要快速且精確地檢索食譜資料庫，以便找到最匹配使用者食材的候選食譜。 | 建立食譜資料庫的**向量嵌入索引**；檢索機制需找出**食材涵蓋率最高**的 Top K 筆食譜。 |
| **2.2 RAG 生成 (Generator)** | 作為 AI 代理人，我想要根據候選食譜和使用者提供的食材，生成一道完整且可行的客製化料理建議。 | 整合 **API LLM (如：Gemini, GPT)** 作為生成器；針對**缺少**的少量非主要食材，建議**替代方案**。 |
| **2.3 篩選與偏好設定** | 作為使用者，我想要依據我的飲食偏好和烹飪時間來篩選食譜，以便找到最符合我需求的料理。 | 提供篩選條件：烹飪時間、難易度、菜系、素食/葷食；系統能根據偏好條件調整 RAG 的檢索權重。 |

### 2.3 Epic 3: 食譜結果展示與互動

| Story | 描述 | 驗收標準 (Acceptance Criteria) |
| :--- | :--- | :--- |
| **3.1 推薦結果展示** | 作為使用者，我想要以視覺化且易於閱讀的方式查看推薦食譜，以便快速做出選擇。 | 以卡片形式展示推薦的 Top N 筆食譜 (N $\ge 5$)；卡片顯示：料理名稱、**食材吻合度**（百分比）、預計烹飪時間、圖片。 |
| **3.2 食譜細節與步驟** | 作為使用者，我想要點擊食譜後能看到完整的製作細節，以便我可以開始下廚。 | 獨立頁面展示食譜所需的**所有食材清單**及數量；**高亮標註**使用者已擁有的食材；提供清晰分步驟的**製作過程**。 |
| **3.3 結果回饋與優化** | 作為使用者，我想要針對推薦的食譜提供回饋，以便系統能持續學習和優化推薦結果。 | 提供滿意度評分（1-5星）和文字回饋功能；系統需將回饋數據納入模型優化的資料集。 |

## 3. 非功能需求 (Non-functional Requirements)

### 3.1 效能 (Performance)
- **食材處理時間**：圖片上傳、API 識別與清單建立，總時間 $\le 5$ 秒。
- **RAG 推薦時間**：從提交食材清單到顯示推薦結果，總時間 $\le 10$ 秒。
- **系統負載**：應能支持同時 100 位使用者。

### 3.2 安全性 (Security)
- **資料加密**：所有資料傳輸必須使用 HTTPS 加密。
- **隱私保護**：客戶端圖片處理優先，不永久保留使用者隱私照片。
- **資料合規性**：符合相關的資料隱私保護法規。

### 3.3 可用性與相容性 (Usability & Compatibility)
- **響應式設計**：介面必須適配桌面、平板和手機等所有主流裝置。
- **瀏覽器相容性**：支持主流瀏覽器 (Chrome, Firefox, Safari)。
- **可用性**：介面直觀，提供友善的錯誤提示。

## 4. 系統架構 (System Architecture)

### 4.1 高層級架構
本系統採用 **客戶端-伺服器** 架構，後端將核心功能拆分為三個主要服務：圖像識別服務 (API)、RAG 核心服務和應用服務。

1. **客戶端 (Client)**: 前端使用者介面。
2. **應用服務 (Application Service)**: 接收請求，協調其他服務。
3. **圖像識別 API (Vision API)**: 負責食材辨識。
4. **RAG 核心服務 (RAG Core Service)**: 負責食譜檢索與生成。
5. **食譜知識庫 (Recipe Knowledge Base)**: 儲存食譜數據和向量索引。

### 4.2 RAG 核心模型架構
系統將實作 **RAG (Retrieval-Augmented Generation)** 三階段流程，確保推薦的準確性和客製化。

| 階段 | 描述 | 初學者實作建議 |
| :--- | :--- | :--- |
| **1. 索引 (Indexing)** | 將食譜文本資料庫分割並轉換為向量嵌入。 | 使用 **Sentence-BERT** 等預訓練模型進行嵌入，向量儲存於 **ChromaDB/Pinecone** 等易用的向量資料庫。 |
| **2. 檢索 (Retrieval)** | 將使用者食材清單向量化，與食譜向量資料庫進行相似性搜尋，檢索出 Top K 筆最相關食譜。 | 使用 **LangChain/LlamaIndex** 框架簡化檢索邏輯。 |
| **3. 生成 (Generation)** | 將檢索到的食譜內容和使用者食材清單，輸入給 LLM，生成最終的客製化食譜及替代建議。 | 使用 **API LLM (如：Gemini, GPT)** 進行生成，以簡化部署和提高生成品質。 |

### 4.3 技術堆疊 (協作優化)
| 層級 | 技術項目 | 目的與優勢 |
| :--- | :--- | :--- |
| **前端** | React/Vue.js | 開發高效的互動式使用者介面。 |
| **後端** | Python (Flask) | 選擇輕量級的 **Python Flask** 框架，適合初學者快速開發 API 服務。 |
| **食材識別** | **外部 API 呼叫** (Gemini Pro Vision, Google Vision API, etc.) | **取代複雜的本地模型訓練**，透過雲端 API 快速獲得高精度食材清單。 |
| **AI 核心 (RAG)** | LangChain/LlamaIndex, **API LLM** | 使用 LangChain/LlamaIndex 框架來串接檢索與生成，並使用 API LLM 簡化部署。 |
| **資料庫** | PostgreSQL/MongoDB (原始數據), **ChromaDB/Pinecone** (向量數據) | **ChromaDB** 或 **Pinecone** 對初學者友善，易於建立向量儲存。 |
| **雲端** | Vercel/Render/PythonAnywhere | 選擇對初學者友善的輕量級雲端平台進行部署。 |

## 5. 驗收準則 (Acceptance Criteria)

### Acceptance Criteria 1: 食材上傳與清單建立
**Given** 使用者有剩餘食材照片  
**When** 使用者上傳照片到系統  
**Then** 系統應該：
- 在 **5 秒內** 完成 API 呼叫、食材識別和清單生成。
- 透過 Vision API 或 MLLM 成功識別圖片中**至少 80%** 的主要食材名稱。
- 使用者能夠手動新增未識別的食材並調整數量和狀態。

### Acceptance Criteria 2: 食譜推薦與 RAG 核心整合
**Given** 系統已收到最終食材清單  
**When** AI 代理人執行 RAG 檢索與生成  
**Then** 系統應該：
- 在 **10 秒內** 完成 RAG 流程並展示推薦結果。
- 推薦至少 3 筆食譜，其中**食材吻合度最高**的食譜應**涵蓋 90% 以上**的使用者食材。
- LLM 應在步驟中建議合理的**替代方案**。
- 食譜卡片必須清晰顯示「食材吻合度」百分比。

### Acceptance Criteria 3: 資訊整合與使用者體驗
**Given** 系統已成功展示推薦食譜  
**When** 使用者查看整合資訊  
**Then** 系統應該：
- 獨立頁面高亮顯示使用者**已擁有**的食材，並區分標註**所需但缺少**的額外食材。
- 確保介面在不同裝置上（桌面、平板、手機）都能正常顯示和操作。
- 提供 1-5 星評分和文字回饋機制，且後台需成功記錄此數據用於模型迭代優化。

---

**文件維護者**: Chris Huang  
**最後更新**: 2025年11月 
**審查狀態**: AI協作進行中